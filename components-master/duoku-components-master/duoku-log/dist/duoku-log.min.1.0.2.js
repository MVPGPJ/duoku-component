!function(r){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return r[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=r,e.c=n,e.d=function(r,n,t){e.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:t})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,n){if(1&n&&(r=e(r)),8&n)return r;if(4&n&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var i in r)e.d(t,i,function(n){return r[n]}.bind(null,i));return t},e.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(n,"a",n),n},e.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},e.p="",e(e.s="./src/duoku-log.js")}({"./src/duoku-log.js":
/*!**************************!*\
  !*** ./src/duoku-log.js ***!
  \**************************/
/*! no static exports found */function(module,exports){eval("function Base64 () {\r\n  // private property\r\n  _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\r\n  \r\n  // public method for encoding\r\n  this.encode = function (input) {\r\n    var output = ''\r\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4\r\n    var i = 0\r\n    input = _utf8_encode (input)\r\n    while (i < input.length) {\r\n      chr1 = input.charCodeAt (i++)\r\n      chr2 = input.charCodeAt (i++)\r\n      chr3 = input.charCodeAt (i++)\r\n      enc1 = chr1 >> 2\r\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4)\r\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6)\r\n      enc4 = chr3 & 63\r\n      if (isNaN (chr2)) {\r\n        enc3 = enc4 = 64\r\n      } else if (isNaN (chr3)) {\r\n        enc4 = 64\r\n      }\r\n      output = output +\r\n        _keyStr.charAt (enc1) + _keyStr.charAt (enc2) +\r\n        _keyStr.charAt (enc3) + _keyStr.charAt (enc4)\r\n    }\r\n    return output\r\n  }\r\n  \r\n  // public method for decoding\r\n  this.decode = function (input) {\r\n    var output = ''\r\n    var chr1, chr2, chr3\r\n    var enc1, enc2, enc3, enc4\r\n    var i = 0\r\n    input = input.replace (/[^A-Za-z0-9\\+\\/\\=]/g, '')\r\n    while (i < input.length) {\r\n      enc1 = _keyStr.indexOf (input.charAt (i++))\r\n      enc2 = _keyStr.indexOf (input.charAt (i++))\r\n      enc3 = _keyStr.indexOf (input.charAt (i++))\r\n      enc4 = _keyStr.indexOf (input.charAt (i++))\r\n      chr1 = (enc1 << 2) | (enc2 >> 4)\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2)\r\n      chr3 = ((enc3 & 3) << 6) | enc4\r\n      output = output + String.fromCharCode (chr1)\r\n      if (enc3 != 64) {\r\n        output = output + String.fromCharCode (chr2)\r\n      }\r\n      if (enc4 != 64) {\r\n        output = output + String.fromCharCode (chr3)\r\n      }\r\n    }\r\n    output = _utf8_decode (output)\r\n    return output\r\n  }\r\n  \r\n  // private method for UTF-8 encoding\r\n  _utf8_encode = function (string) {\r\n    string = string.replace (/\\r\\n/g, '\\n')\r\n    var utftext = ''\r\n    for (var n = 0; n < string.length; n++) {\r\n      var c = string.charCodeAt (n)\r\n      if (c < 128) {\r\n        utftext += String.fromCharCode (c)\r\n      } else if ((c > 127) && (c < 2048)) {\r\n        utftext += String.fromCharCode ((c >> 6) | 192)\r\n        utftext += String.fromCharCode ((c & 63) | 128)\r\n      } else {\r\n        utftext += String.fromCharCode ((c >> 12) | 224)\r\n        utftext += String.fromCharCode (((c >> 6) & 63) | 128)\r\n        utftext += String.fromCharCode ((c & 63) | 128)\r\n      }\r\n      \r\n    }\r\n    return utftext\r\n  }\r\n  \r\n  // private method for UTF-8 decoding\r\n  _utf8_decode = function (utftext) {\r\n    var string = ''\r\n    var i = 0\r\n    var c = c1 = c2 = 0\r\n    while (i < utftext.length) {\r\n      c = utftext.charCodeAt (i)\r\n      if (c < 128) {\r\n        string += String.fromCharCode (c)\r\n        i++\r\n      } else if ((c > 191) && (c < 224)) {\r\n        c2 = utftext.charCodeAt (i + 1)\r\n        string += String.fromCharCode (((c & 31) << 6) | (c2 & 63))\r\n        i += 2\r\n      } else {\r\n        c2 = utftext.charCodeAt (i + 1)\r\n        c3 = utftext.charCodeAt (i + 2)\r\n        string += String.fromCharCode (((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63))\r\n        i += 3\r\n      }\r\n    }\r\n    return string\r\n  }\r\n}\r\n\r\nwindow.base64 = new Base64 ()\r\n/**\r\n  * 发送统计日志到BI\r\n  */\r\n;(function () {\r\n  \r\n  // 获取操作系统信息\r\n  function getOS () {\r\n    var pf = window.navigator.platform\r\n    var ua = window.navigator.userAgent\r\n    \r\n    if (ua.match (/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) return 'ios'\r\n    if (ua.indexOf ('Android') > -1 || ua.indexOf ('Adr') > -1) return 'android'\r\n    if ((pf == 'Win32') || (pf == 'Windows') || (ua.indexOf ('Windows') > -1)) return 'windows'\r\n    if ((pf == 'Mac68K') || (pf == 'MacPPC') || (pf == 'Macintosh') || (pf == 'MacIntel')) return 'mac'\r\n    if (pf == 'X11') return 'unix'\r\n    if (String (pf).indexOf ('Linux') > -1) return 'linux'\r\n    \r\n    return 'unknown'\r\n  }\r\n  \r\n  // 获取浏览器信息\r\n  function getBrowser () {\r\n    var ua = window.navigator.userAgent.toLowerCase ()\r\n    \r\n    if (ua.indexOf ('micromessenger') > -1) return 'wechat'\r\n    if (ua.indexOf ('ucbrowser') > -1 || ua.indexOf ('ucweb') > -1) return 'uc'\r\n    if (ua.indexOf ('chrome') > -1) return 'chrome'\r\n    if (ua.indexOf ('safari') > -1) return 'safari'\r\n    if (ua.indexOf ('mozilla') > -1) return 'firefox'\r\n    if (ua.indexOf ('ie') > -1) return 'ie'\r\n    if (ua.indexOf ('opera') > -1) return 'opera'\r\n    if (ua.indexOf ('kindle') > -1) return 'kindle'\r\n    \r\n    return 'unknown'\r\n  }\r\n  \r\n  // 获取渠道信息\r\n  function getChannel () {\r\n    var retval = 0\r\n    var reg = /(^|&)channel=(.*?)(&|$)/i\r\n    var search = window.location.search.substr (1)\r\n    var result = search.match (reg)\r\n    \r\n    if (result) retval = result[2]\r\n    return retval\r\n  }\r\n  \r\n  function getAppid () {\r\n    return localStorage.getItem ('_dklog_appid') || ''\r\n  }\r\n  \r\n  var biurl = '//state.duoku.com/bilog/1.jpg'\r\n  var fixedParams = ''\r\n  \r\n  function sendLog (params, callback) {\r\n    if (!params || typeof params != 'object') return\r\n    \r\n    var url = biurl + '?' + fixedParams\r\n    var paramsStr = ''\r\n    \r\n    for (var prop in params) {\r\n      if (params.hasOwnProperty (prop)) {\r\n        if (prop === 'properties') {\r\n          paramsStr += '&' + prop + '=' + base64.encode (JSON.stringify (params[prop]))\r\n        } else {\r\n          paramsStr += '&' + prop + '=' + params[prop]\r\n        }\r\n      }\r\n    }\r\n    \r\n    url += paramsStr\r\n    url += '&_=' + (new Date).getTime () // 加上时间戳\r\n    \r\n    // 发送统计到BI\r\n    var img = new Image ()\r\n    img.error = img.onload = function () {\r\n      callback && callback ()\r\n    }\r\n    img.src = url\r\n  }\r\n  \r\n  if(typeof(_dklog) === \"undefined\" ){\r\n     throw error('_dklog 未定义 ')\r\n     return\r\n  }\r\n  \r\n  localStorage.setItem ('_dklog_appid', _dklog.appid)\r\n  fixedParams = 'action=felog&appid=' + getAppid () + '&os=' + getOS () + '&browser=' + getBrowser () + '&cid=' + getChannel ()\r\n  \r\n  if(_dklog){\r\n    \r\n    while( _dklog.length >0 ){\r\n      sendLog (_dklog.shift())\r\n    }\r\n    \r\n    _dklog.push = function (params) {\r\n      var t = setTimeout(function () {\r\n        sendLog (params)\r\n        clearTimeout(t)\r\n        t = null\r\n      },0)\r\n    }\r\n    \r\n  }\r\n}) ()\r\n\n\n//# sourceURL=webpack:///./src/duoku-log.js?")}});